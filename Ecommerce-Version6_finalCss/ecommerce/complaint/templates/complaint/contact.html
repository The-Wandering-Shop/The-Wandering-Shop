{% extends 'core/base.html' %}
{% load static %}
{% block content %}




 <!-- wrapper -->
<div class="container grid grid-cols-1 md:grid-cols-4 gap-6 pl-7  pt-10 pb-16">
  
  <!-- Sidebar -->
  <aside class="col-span-1 bg-white shadow rounded p-4 space-y-4 text-gray-600">
    <div class="px-5 py-3 shadow flex items-center gap-4">
      <div class="flex-grow">
        <h4 class="text-gray-900 font-medium">Welcome</h4>
      </div>
    </div>

    <div class="divide-y divide-gray-200 space-y-4">
      <!-- Group 1 -->
      <div class="space-y-1 pl-8">
        <a href="#" class="relative text-primary block font-medium capitalize transition">
          <span class="absolute -left-8 top-0 text-base">
            <i class="fa-regular fa-address-card"></i>
          </span>
          Products Quality
        </a>
        <a href="#" class="relative hover:text-primary block capitalize transition">Size Guides</a>
        <a href="#" class="relative hover:text-primary block capitalize transition">Returns Policy</a>
      </div>

      <!-- Group 2 -->
      <div class="space-y-1 pl-8 pt-4">
        <a href="#" class="relative hover:text-primary block font-medium capitalize transition">
          <span class="absolute -left-8 top-0 text-base">
            <i class="fa-solid fa-box-archive"></i>
          </span>
          Shipping
        </a>
        <a href="#" class="relative hover:text-primary block capitalize transition">Shipping Policy</a>
        <a href="#" class="relative hover:text-primary block capitalize transition">24hr Shipping</a>
      </div>

      <!-- Group 3 -->
      <div class="space-y-1 pl-8 pt-4">
        <a href="#" class="relative hover:text-primary block font-medium capitalize transition">
          <span class="absolute -left-8 top-0 text-base">
            <i class="fa-regular fa-credit-card"></i>
          </span>
          Payment methods
        </a>
        <a href="#" class="relative hover:text-primary block capitalize transition">Vouchers</a>
      </div>

      <!-- Complaint Button -->
      <div class="space-y-1 pl-8 pt-4">
        <button id="showFormBtn" onclick="toggleForm()" class="rounded p-3 bg-gradient-to-r from-yellow-500 to-yellow-300 hover:text-gray-900 text-white font-medium capitalize transition w-full">
          Complaint
        </button>
      </div>
    </div>
</aside>

  <!-- Contact Section -->
  <section class="col-span-3 bg-gray-50 px-15 p-6 rounded-lg">
    <h2 class="text-xl font-semibold mb-4">Contact Us</h2>
    <address class="not-italic text-gray-700">
      The Wandering Shop<br>
      123 Fantasy Lane<br>
      Imaginaria, Fictionland 45768<br>
      <a href="tel:+1234567890" class="text-blue-500 hover:underline">+1 (234) 567-890</a><br>
      <a href="mailto:info@wandering-shop.com" class="text-blue-500 hover:underline">info@wandering-shop.com</a>
    </address>
  </section>
</div>

  


<!-- Move form OUTSIDE the wrapper/grid -->
<div id="formContainer" class="{% if not success %}hidden{% endif %} w-full fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-lg">
        {% if success %}
            <p class="text-red-600 font-semibold text-center mb-4">
                Your complaint was submitted successfully!
            </p>
        {% endif %}

    <form id="contactForm" method="post" novalidate>
    {% csrf_token %}
    {{ form.non_field_errors }}

    <!-- Name Field -->
    <div class="mb-4">
        <div class="flex items-center justify-between">
            <label class="block font-semibold">Name:</label>
            <p class="name-error text-red-500 text-sm ml-4"></p>
        </div>
        {{ form.name }}
    </div>

    <!-- Email Field -->
    <div class="mb-4">
        <div class="flex items-center justify-between">
            <label class="block font-semibold">Email:</label>
            <p class="email-error text-red-500 text-sm ml-4"></p>
        </div>
        {{ form.email }}
    </div>

    <!-- Order Number Field -->
    <div class="mb-4">
        <div class="flex items-center justify-between">
            <label class="block font-semibold">Order Number (6-digit):</label>
            <p class="order_number-error text-red-500 text-sm ml-4"></p>
        </div>
        {{ form.order_number }}
    </div>

    <!-- Subject Field -->
    <div class="mb-4">
        <div class="flex items-center justify-between">
            <label class="block font-semibold">Subject:</label>
            <p class="subject-error text-red-500 text-sm ml-4"></p>
        </div>
        {{ form.subject }}
    </div>

    <!-- Message Field -->
    <div class="mb-4">
        <div class="flex items-center justify-between">
            <label class="block font-semibold">Message:</label>
            <p class="message-error text-red-500 text-sm ml-4"></p>
        </div>
        {{ form.message }}
    </div>

    <div class="flex justify-between items-center">
        <button type="submit" class="rounded p-1 likeBtn bg-gradient-to-r from-yellow-500 to-yellow-300 text-white hover:text-gray-900 transition duration-200">Submit</button>
        <button id="closeFormBtn" type="button" class="rounded p-1 bg-gradient-to-r from-yellow-500 to-yellow-300 text-white hover:text-gray-900">Close Form</button>
    </div>
    </form>

    </div>
</div>

    <!-- ./wrapper -->

 

<script>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("contactForm");
    const formContainer = document.getElementById("formContainer");
    const showFormBtn = document.getElementById("showFormBtn");
    const closeFormBtn = document.getElementById("closeFormBtn");

    // Toggle Form
    window.toggleForm = function () {
        formContainer.classList.remove("hidden");
        showFormBtn.classList.add("hidden");
        closeFormBtn.classList.remove("hidden");
    };

    closeFormBtn.addEventListener("click", () => {
        formContainer.classList.add("hidden");
        showFormBtn.classList.remove("hidden");
        closeFormBtn.classList.add("hidden");
        form.reset();
        clearErrors();
    });

    form.addEventListener("submit", (e) => {
        clearErrors();

        const name = form.querySelector('[name="name"]');
        const email = form.querySelector('[name="email"]');
        const order = form.querySelector('[name="order_number"]');
        const subject = form.querySelector('[name="subject"]');
        const message = form.querySelector('[name="message"]');

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const nameRegex = /^[A-Za-z\s]+$/;

        let hasError = false;

        if (!name.value.trim()) {
            showError(name, "Name is required.");
            hasError = true;
        } else if (!nameRegex.test(name.value.trim())) {
            showError(name, "Name must contain only letters and spaces.");
            hasError = true;
        }

        if (!email.value.trim()) {
            showError(email, "Email is required.");
            hasError = true;
        } else if (!emailRegex.test(email.value.trim())) {
            showError(email, "Please enter a valid email address.");
            hasError = true;
        }

        if (!order.value.trim()) {
            showError(order, "Order number is required.");
            hasError = true;
        } else if (!/^\d{6}$/.test(order.value.trim())) {
            showError(order, "Order number must be exactly 6 digits.");
            hasError = true;
        }

        if (!subject.value.trim()) {
            showError(subject, "Subject is required.");
            hasError = true;
        }

        if (!message.value.trim()) {
            showError(message, "Message is required.");
            hasError = true;
        } else if (message.value.trim().length < 10) {
            showError(message, "Message must be at least 10 characters.");
            hasError = true;
        }

        if (hasError) {
            e.preventDefault();
        }
    });

    function showError(input, message) {
        const fieldName = input.name;
        const errorElement = form.querySelector(`.${fieldName}-error`);
        if (errorElement) {
            errorElement.textContent = message;
        }
        input.classList.add("border", "border-red-500");
    }

    function clearErrors() {
        const errorEls = form.querySelectorAll(".text-red-500");
        errorEls.forEach(el => el.textContent = "");

        const inputs = form.querySelectorAll("input, textarea");
        inputs.forEach(input => input.classList.remove("border", "border-red-500"));
    }
});
</script>






{% endblock %}