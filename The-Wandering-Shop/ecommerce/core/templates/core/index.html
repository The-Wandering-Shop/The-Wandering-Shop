{% extends "core/base.html" %}

{% load static %}

{% block title %}Products - My Store{% endblock %}

{% block content %}


 <!-- Category Section with 6 images (2 rows of 3, bigger images) -->
<div class="container mt-6 mb-10 max-w-screen-lg mx-auto px-2 mx-auto px-4py-16 pt-10">
    {% comment %} <h2 class="text-2xl font-medium text-gray-800 uppercase mb-6">shop by category</h2> {% endcomment %}
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-1">
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/KAWAII.jpg' %}" alt="category 1" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'kawaii' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Kawaii</a>
        </div>
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/ANTIQUE_1.jpg' %}" alt="category 2" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'fantasy' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Fantasy</a>
        </div>
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/ANTIQUE_2.jpg' %}" alt="category 3" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'antique' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Antique</a>
        </div>
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/PUNK.jpg' %}" alt="category 4" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'punk' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Punk</a>
        </div>
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/FURRIES_1.jpg' %}" alt="category 5" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'furries' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Furries</a>
        </div>
        <div class="relative rounded-sm overflow-hidden group h-72">
            <img src="{% static 'assets/images/category/BRANDING.jpg' %}" alt="category 6" class="w-full h-full object-cover">
            <a href="{% url 'product:products_by_category' 'branding' %}"
                class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-xl text-white font-roboto group-hover:bg-opacity-60 transition">Branding</a>
        </div>
    </div>
</div>

    
<!-- features -->
<div class="container px-10 pt-10">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-12 justify-center mx-auto" style="max-width: 700px;">
    <div style="border: 2px solid #fcc200;" class="rounded-sm flex justify-center items-center gap-5 w-72 px-6 py-4 mx-auto">
      <img src="{% static 'assets/images/delivery.png' %}" alt="Delivery" class="w-12 h-12 object-contain">
      <div>
        <h4 class="font-medium capitalize text-lg">Free Shipping</h4>
        <p class="text-gray-500 text-sm">Order over R200</p>
      </div>
    </div>
    <div style="border: 2px solid #fcc200;" class="rounded-sm flex justify-center items-center gap-5 w-72 px-6 py-4 mx-auto">
      <img src="{% static 'assets/images/tracking.png' %}" alt="Delivery" class="w-12 h-12 object-contain">
      <div>
        <h4 class="font-medium capitalize text-lg">Order Tracking</h4>
        <p class="text-gray-500 text-sm">Let's get tracking.</p>
      </div>
    </div>
  </div>
</div>





<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 max-w-5xl mx-auto mt-12">

    {% for product in products %}

    <div class="p-4 rounded-xl overflow-hidden flex flex-col hover:shadow-lg transition h-full bg-white">
        
        <!-- Product Image Block -->
        <div class="relative w-full h-60 flex items-center justify-center">
            <a href="{% url 'product:detail' product.category.slug product.slug %}" class="block w-full h-full">
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-auto max-h-60 object-contain mx-auto">
                {% endif %}
            </a>
            {% if product.is_new %}
            <span class="absolute bottom-1 left-3 text-white bg-red-600 px-2 py-0.5 rounded text-sm">
                New
            </span>
            {% endif %}
        </div>

        <!-- Product Info -->
        <div class="p-3 flex-1 flex flex-col justify-between">
            <div class="flex items-center justify-between mb-2">
                <h2 class="text-xl font-semibold">{{ product.name }}</h2>
                
                {% if user.is_authenticated %}
                <form method="post" action="{% url 'order:add_to_wishlist' product.id %}">
                {% csrf_token %}
                <button type="submit" class="btn likeBtn text-yellow-400 hover:text-red-500 transition duration-200">
                    <i class="fas fa-heart text-1xl"></i>
                </button>
                </form>
            {% else %}
                <form method="post" action="{% url 'users:login' %}">
                    {% csrf_token %}
                    <button type="submit" class="btn likeBtn text-yellow-400 hover:text-red-500 transition duration-200">
                        <i class="fas fa-heart text-1xl"></i>
                    </button>
                    </form>
            {% endif %}

            </div>

            <p class="text-gray-500 mb-4">Price: R{{ product.price }}</p>

            {% if user.is_authenticated %}
            <form method="post" action="{% url 'order:add_to_cart' product.id %}">
                {% csrf_token %}
                <button type="submit"
                    class="bg-gradient-to-r from-yellow-500 to-yellow-300 hover:text-red-600 transition duration-200 w-full py-2 text-center text-white rounded">
                    Add to cart
                </button>
            </form>
            {% else %}
            <form method="post" action="{% url 'users:login' %}">
                {% csrf_token %}
                <button type="submit"
                    class="bg-gradient-to-r from-yellow-500 to-yellow-300 hover:text-red-600 transition duration-200 w-full py-2 text-center text-white rounded">
                    Log in to add to cart
                </button>
            </form>
            {% endif %}
        </div>

    </div>

    {% endfor %}
</div>


 {% block script %}
    <script>

        const likeBtn = document.getElementById("likeBtn");

        likeBtn.addEventListener ("click", () => {
            likeBtn.classList.add("text-red-500");
            likeBtn.classList.remove("text-yellow-400");
        }
        );
    </script>
{% endblock %}
    
    </div>
</div>



{% endblock %}